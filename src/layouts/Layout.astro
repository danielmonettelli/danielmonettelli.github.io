---
import "../styles/global.css";
import DevBackground from "@components/DevBackground.astro";

export interface Props {
  title?: string;
  description?: string;
  image?: string;
}

const {
  title = "Daniel Monettelli — Full Stack Developer | .NET & Mobile Specialist",
  description = "Full Stack Developer especializado en .NET y desarrollo móvil multiplataforma. Nominado Microsoft MVP. Portfolio de proyectos, experiencia y habilidades técnicas.",
  image = "https://raw.githubusercontent.com/danielmonettelli/danielmonettelli.github.io/main/assets/images/Daniel_Monettelli.png",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="es" class="scroll-smooth" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />

    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="author" content="Daniel Monettelli" />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={image} />
    <meta name="twitter:creator" content="@DaniMonettelli" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="https://raw.githubusercontent.com/danielmonettelli/danielmonettelli.github.io/main/assets/images/Daniel_Monettelli.png"
    />
    <link
      rel="apple-touch-icon"
      href="https://raw.githubusercontent.com/danielmonettelli/danielmonettelli.github.io/main/assets/images/Daniel_Monettelli.png"
    />

    <!-- Theme Color for browser chrome -->
    <meta name="theme-color" content="hsl(210, 14%, 7%)" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

    <!-- Fonts: IBM Plex Sans + General Sans (MUI-style) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://api.fontshare.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=IBM+Plex+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <!-- General Sans (MUI docs heading font) from Fontshare -->
    <link
      href="https://api.fontshare.com/v2/css?f[]=general-sans@400,500,600,700&display=swap"
      rel="stylesheet"
    />

    <!-- Theme: prevent FOUC by applying saved theme before render -->
    <!-- Also set --MuiDocs-header-height CSS var like mui.com -->
    <script is:inline>
      (function() {
        var saved = localStorage.getItem('theme');
        var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        var theme = saved || (prefersDark ? 'dark' : 'dark');
        document.documentElement.setAttribute('data-theme', theme);
        document.documentElement.style.setProperty('--MuiDocs-header-height', '60px');
      })();
    </script>
  </head>
  <body
    class="antialiased overflow-x-hidden relative"
    style="background-color: var(--mui-bg); color: var(--mui-text-primary);"
  >
    <!-- Dev-themed animated background -->
    <DevBackground />

    <!-- Scroll Progress Bar (below navbar z-50, above background) -->
    <div
      id="scroll-progress"
      class="fixed top-0 left-0 h-0.5 z-[51] transition-none"
      style="width: 0%; background: var(--mui-primary);"
    >
    </div>

    <!-- Main Content -->
    <main class="relative z-10">
      <slot />
    </main>

    <!-- Scroll Progress -->
    <script>
      // Scroll Progress Bar
      const progressBar = document.getElementById("scroll-progress");
      if (progressBar) {
        window.addEventListener("scroll", () => {
          const scrollTop = window.scrollY;
          const docHeight = document.documentElement.scrollHeight - window.innerHeight;
          const scrollPercent = (scrollTop / docHeight) * 100;
          progressBar.style.width = scrollPercent + "%";
        }, { passive: true });
      }
    </script>
  </body>
</html>
