---
/**
 * Hero Section — MUI brandingTheme.ts style
 * Clean, flat design — no gradients, no decorative shapes.
 * Typography: h1 uses "General Sans", body uses "IBM Plex Sans".
 * "Full Stack Developer" is static; only the role after | typewriter-animates.
 */
---

<section
  id="home"
  class="relative min-h-screen flex items-center justify-center overflow-hidden pt-[60px]"
>
  <!-- Content -->
  <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 text-center">
    <!-- Main Title -->
    <h1 class="hero-title mui-h1 mb-4">
      <span class="block opacity-0 hero-line" data-i18n="hero.greeting">Hi, I'm</span>
      <span class="block opacity-0 hero-line gradient-text">
        Daniel Monettelli
      </span>
    </h1>

    <!-- Subtitle: "Full Stack Developer" on its own static line; typewriter on a separate line to prevent layout shift -->
    <div class="mb-8 opacity-0 hero-line text-center">
      <p class="text-lg sm:text-xl md:text-2xl font-medium" style="color: var(--mui-text-secondary);">
        Full Stack Developer
      </p>
      <p class="text-sm sm:text-base md:text-lg font-mono mt-2 min-h-[1.5em]" style="color: var(--mui-primary);">
        <span id="typewriter" role="status"></span><span class="animate-pulse" aria-hidden="true">_</span>
      </p>
    </div>

    <!-- Description -->
    <p class="hero-desc max-w-2xl mx-auto text-sm sm:text-base md:text-lg leading-relaxed mb-10 opacity-0" style="color: var(--mui-text-muted);" data-i18n-html="hero.description">
      Developer with solid experience in the
      <span class="accent-text font-medium">.NET</span> ecosystem and cross-platform mobile development.
      <span class="accent-text font-medium">Microsoft MVP</span> Nominee.
      I build clean, secure, and deeply functional software.
    </p>

    <!-- CTA Buttons -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 hero-cta opacity-0">
      <a
        href="#projects"
        class="magnetic-btn mui-btn-contained mui-btn-lg group"
      >
        <span data-i18n="hero.ctaProjects">View Projects</span>
        <svg class="w-4 h-4 group-hover:translate-y-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
        </svg>
      </a>
      <a
        href="#contact"
        class="magnetic-btn mui-btn-outlined mui-btn-lg"
      >
        <span data-i18n="hero.ctaContact">Contact →</span>
      </a>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <div class="absolute bottom-4 sm:bottom-6 left-1/2 -translate-x-1/2 hero-scroll opacity-0 pointer-events-auto">
    <a href="#about" class="scroll-indicator" aria-label="Go to About section" data-i18n-aria="hero.scrollAria">
      <svg class="scroll-mouse" width="24" height="38" viewBox="0 0 24 38" fill="none" aria-hidden="true">
        <rect x="1" y="1" width="22" height="36" rx="11" stroke="currentColor" stroke-width="1.5" />
        <circle class="scroll-dot" cx="12" cy="10" r="2.5" fill="var(--mui-primary)" />
      </svg>
      <span class="scroll-label" data-i18n="hero.scrollLabel">Scroll</span>
    </a>
  </div>
</section>

<script>
  import gsap from "gsap";

  // GSAP Hero Timeline — clean entrance
  const heroTL = gsap.timeline({ delay: 0.3 });

  // Set initial states
  gsap.set(
    [".hero-line", ".hero-desc", ".hero-cta"],
    { y: 20 }
  );

  heroTL
    .to(
      ".hero-line",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        stagger: 0.15,
        ease: "power3.out",
      },
      "-=0.3"
    )
    .to(
      ".hero-desc",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power3.out",
      },
      "-=0.2"
    )
    .to(
      ".hero-cta",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power3.out",
      },
      "-=0.2"
    )
    .to(
      ".hero-scroll",
      {
        opacity: 1,
        duration: 0.5,
        ease: "power2.out",
      },
      "-=0.1"
    );

  // Typewriter effect for roles (only the changing text after "Full Stack Developer |")
  const roles = [
    ".NET & Mobile Specialist",
    "Xamarin.Forms Expert",
    ".NET MAUI Developer",
    "ASP.NET Core Backend",
    "Clean Architecture",
    "Microsoft MVP Nominee",
  ];

  let roleIndex = 0;
  let charIndex = 0;
  let isDeleting = false;
  const typewriterEl = document.getElementById("typewriter");

  // Respect reduced motion preference: show first role immediately, skip animation
  const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  function typeWriter() {
    if (!typewriterEl) return;

    const currentRole = roles[roleIndex];

    if (!isDeleting) {
      typewriterEl.textContent = currentRole.substring(0, charIndex + 1);
      charIndex++;

      if (charIndex === currentRole.length) {
        isDeleting = true;
        setTimeout(typeWriter, 2000);
        return;
      }
    } else {
      typewriterEl.textContent = currentRole.substring(0, charIndex - 1);
      charIndex--;

      if (charIndex === 0) {
        isDeleting = false;
        roleIndex = (roleIndex + 1) % roles.length;
      }
    }

    const speed = isDeleting ? 40 : 80;
    setTimeout(typeWriter, speed);
  }

  if (prefersReducedMotion) {
    // Show the first role immediately without animation
    if (typewriterEl) typewriterEl.textContent = roles[0];
  } else {
    // Start typewriter after hero-line animations complete (~1.5s)
    setTimeout(typeWriter, 1500);
  }
</script>
