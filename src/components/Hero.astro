---
/**
 * Hero Section — MUI brandingTheme.ts style
 * Clean, flat design — no gradients, no decorative shapes.
 * Typography: h1 uses "General Sans", body uses "IBM Plex Sans".
 * "Full Stack Developer" is static; only the role after | typewriter-animates.
 */
---

<section
  id="hero"
  class="relative min-h-screen flex items-center justify-center overflow-hidden pt-[60px]"
>
  <!-- Content -->
  <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 text-center">
    <!-- Main Title -->
    <h1 class="hero-title mui-h1 mb-4">
      <span class="block opacity-0 hero-line">Hola, soy</span>
      <span class="block opacity-0 hero-line gradient-text">
        Daniel Monettelli
      </span>
    </h1>

    <!-- Subtitle: "Full Stack Developer" on its own static line; typewriter on a separate line to prevent layout shift -->
    <div class="mb-8 opacity-0 hero-line text-center">
      <p class="text-lg sm:text-xl md:text-2xl font-medium" style="color: var(--mui-text-secondary);">
        Full Stack Developer
      </p>
      <p class="text-sm sm:text-base md:text-lg font-mono mt-2 min-h-[1.5em]" style="color: var(--mui-primary);">
        <span id="typewriter"></span><span class="animate-pulse">_</span>
      </p>
    </div>

    <!-- Description -->
    <p class="hero-desc max-w-2xl mx-auto text-sm sm:text-base md:text-lg leading-relaxed mb-10 opacity-0" style="color: var(--mui-text-muted);">
      Desarrollador con sólida experiencia en el ecosistema
      <span class="accent-text font-medium">.NET</span> y desarrollo móvil multiplataforma.
      Nominado <span class="accent-text font-medium">Microsoft MVP</span>.
      Construyo software ordenado, seguro y profundamente funcional.
    </p>

    <!-- CTA Buttons -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 hero-cta opacity-0">
      <a
        href="#projects"
        class="magnetic-btn mui-btn-contained mui-btn-lg group"
      >
        Ver Proyectos
        <svg class="w-4 h-4 group-hover:translate-y-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
        </svg>
      </a>
      <a
        href="#contact"
        class="magnetic-btn mui-btn-outlined mui-btn-lg"
      >
        Contactar →
      </a>
    </div>

    <!-- Tech Stack Quick View -->
    <div class="mt-16 hero-tech opacity-0">
      <p class="text-xs uppercase tracking-widest mb-4" style="color: var(--mui-text-disabled);">Stack Principal</p>
      <div class="flex items-center justify-center flex-wrap gap-6">
        {[
          { name: ".NET MAUI", icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>' },
          { name: "ASP.NET Core", icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>' },
          { name: "Kotlin", icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>' },
          { name: "Azure", icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>' },
          { name: "SQL Server", icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>' },
        ].map((tech) => (
          <div
            class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-all duration-200"
            style="border: 1px solid var(--mui-border-subtle); color: var(--mui-text-muted);"
          >
            <span set:html={tech.icon} />
            <span>{tech.name}</span>
          </div>
        ))}
      </div>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 hero-scroll opacity-0">
    <a href="#about" class="flex flex-col items-center gap-2 transition-colors" style="color: var(--mui-text-disabled);" aria-label="Ir a la sección Sobre Mí">
      <span class="text-[10px] uppercase tracking-[0.3em]">Scroll</span>
      <div class="w-5 h-8 rounded-full flex justify-center pt-1.5" style="border: 1px solid var(--mui-border);">
        <div class="w-1 h-2 rounded-full animate-bounce" style="background: var(--mui-primary);"></div>
      </div>
    </a>
  </div>
</section>

<script>
  import gsap from "gsap";

  // GSAP Hero Timeline — clean entrance
  const heroTL = gsap.timeline({ delay: 0.3 });

  // Set initial states
  gsap.set(
    [".hero-line", ".hero-desc", ".hero-cta", ".hero-tech"],
    { y: 20 }
  );

  heroTL
    .to(
      ".hero-line",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        stagger: 0.15,
        ease: "power3.out",
      },
      "-=0.3"
    )
    .to(
      ".hero-desc",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power3.out",
      },
      "-=0.2"
    )
    .to(
      ".hero-cta",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power3.out",
      },
      "-=0.2"
    )
    .to(
      ".hero-tech",
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power3.out",
      },
      "-=0.2"
    )
    .to(
      ".hero-scroll",
      {
        opacity: 1,
        duration: 0.5,
        ease: "power2.out",
      },
      "-=0.1"
    );

  // Typewriter effect for roles (only the changing text after "Full Stack Developer |")
  const roles = [
    ".NET & Mobile Specialist",
    "Xamarin.Forms Expert",
    ".NET MAUI Developer",
    "ASP.NET Core Backend",
    "Clean Architecture",
    "Microsoft MVP Nominee",
  ];

  let roleIndex = 0;
  let charIndex = 0;
  let isDeleting = false;
  const typewriterEl = document.getElementById("typewriter");

  function typeWriter() {
    if (!typewriterEl) return;

    const currentRole = roles[roleIndex];

    if (!isDeleting) {
      typewriterEl.textContent = currentRole.substring(0, charIndex + 1);
      charIndex++;

      if (charIndex === currentRole.length) {
        isDeleting = true;
        setTimeout(typeWriter, 2000);
        return;
      }
    } else {
      typewriterEl.textContent = currentRole.substring(0, charIndex - 1);
      charIndex--;

      if (charIndex === 0) {
        isDeleting = false;
        roleIndex = (roleIndex + 1) % roles.length;
      }
    }

    const speed = isDeleting ? 40 : 80;
    setTimeout(typeWriter, speed);
  }

  // Start typewriter after hero-line animations complete (~1.5s)
  setTimeout(typeWriter, 1500);
</script>
